<?php

// Block direct access
if( ! defined( 'ABSPATH' ) ) exit;

/**
 * Init for Bramble Child
 */
function <%= theme_id %>_init() {

	// Image sizes
	add_image_size( 'wide', 1600, 1200, true );

	// Default settings
	<%= theme_id %>_default_settings();

}

add_action( 'bramble_child_init', '<%= theme_id %>_init' );


/**
*
* Default Bramble settings
*
**/

function <%= theme_id %>_default_settings()
{
	$user = get_option( 'theme_options' );

	$options = array(
		'full_width_content' => 'on',
		'front_page_layout' => 'no-sidebar',
		'blog_layout' => 'no-sidebar',
		'page_layout' => 'no-sidebar',
		'post_layout' => 'no-sidebar',
		'show_header' => 'on',
		'site_logo' => get_stylesheet_directory_uri() .'/images/logo.svg',
		'show_top_menu' => 'on',
		'top_menu_logo'	=> 'on',
		'show_copyright' => 'on',

		// user settings
		'text_font' => isset( $user['text_font'] ) ? $user['text_font'] : 'Open Sans',
		'text_font_size' => isset( $user['text_font_size'] ) ? $user['text_font_size'] : '16',
		'text_font_weight' => isset( $user['text_font_weight'] ) ? $user['text_font_weight'] : '400',
		'headings_font' => isset( $user['headings_font'] ) ? $user['headings_font'] : 'Ubuntu Condensed',
		'headings_font_size' => isset( $user['headings_font_size'] ) ? $user['headings_font_size'] : '16,32',
		'headings_font_weight' => isset( $user['headings_font_weight'] ) ? $user['headings_font_weight'] : '400',
	);

	update_option( 'theme_options', $options );
}


/**
 * Localize scripts
 */
function <%= theme_id %>_localize_scripts()
{
	$localize = array(
		'ajax_url'		=> admin_url('admin-ajax.php')
	);

	wp_localize_script( 'theme', 'localize', $localize );
}

add_action( 'wp_enqueue_scripts', '<%= theme_id %>_localize_scripts', 99 );


/**
 * Enqueue admin scripts
 */
function <%= theme_id %>_enqueue_admin_scripts()
{
	wp_enqueue_script( '<%= theme_id %>-admin', get_stylesheet_directory_uri() . '/javascripts/admin.js', array( 'jquery' ), '', true  );
}

add_action( 'admin_enqueue_scripts', '<%= theme_id %>_enqueue_admin_scripts', 99 );


/**
 * Includes
 */

include 'includes/options.php';


/**
 * Theme Settings Page
 */

function <%= theme_id %>_settings_page( $pages )
{
	$pages[] = array(
		'page_title'	=> 'Theme Settings',
		'menu_title'	=> 'Theme Settings',
		'sub_menu'		=> 'themes.php',
		'capability'	=> 'administrator',
		'menu_slug'		=> 'theme-settings',
		'setting'		=> 'theme_settings',
		'icon'			=> 'options-general',
		'save'			=> true,
		'save_text'		=> __( 'Save Theme Settings', '<%= theme_id %>' ),
		'default_tab'	=> 'Theme Settings'
	);

	return $pages;
}

add_filter('piklist_admin_pages', '<%= theme_id %>_settings_page');